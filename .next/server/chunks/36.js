"use strict";exports.id=36,exports.ids=[36],exports.modules={2243:(a,b,c)=>{c.r(b),c.d(b,{"003e53687e330fc704fa85b6a3451d8bee3c150e02":()=>l,"0052af3a95d8758bd4c48d47869a5cab9c528e4108":()=>h,"0082d0079513fd4c5c13cfe3c858682f91a9efa171":()=>s,"008a90e06fcfebcb5d2335cb3620a29c2cbe9ac207":()=>r,"00a68141e975802a2708f75280ec7521fef4a9a3b8":()=>g,"00b916b4d35a07a5c12206f4c442effdf0acf91981":()=>k,"40048d31d4df527827fcadf8904e3c098844446ac1":()=>j,"406470cb13a121586ae2d149509168abef4d87f656":()=>p,"4072d8b33c0328022b53ec6a098e4c52f0b26b6020":()=>m,"408024dd826fa7664888a180d2acdf049cfb9163b5":()=>i,"40a1b9d81f62360b76f599c8da48a6fb18841c657b":()=>n,"40ab7bcfb75dd71eedd7027941ba4a90f61f0ba607":()=>u,"606302831770c65338865903cb0870eefa29d345a0":()=>v,"60713247e77ce4cb6d2a2f7f2be558bd1e8f9ed33b":()=>q,"60bd0646e89e3f2167cc922d02e8c57fb1279cc1c9":()=>t,"60cd058ff78f4a8e7648e6ec640098af9e28bf9e17":()=>f,"7016069dff30a9bb18d912a27e1eb8eb891d8194c7":()=>o});var d=c(91488);c(27806);let e=(0,c(35668).UU)("https://wlvscjityfaimzuzcqzb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndsdnNjaml0eWZhaW16dXpjcXpiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0MTcyMDQsImV4cCI6MjA3Mjk5MzIwNH0.cmtLthBIFYueMyc5mlTGZA7iHl4KAA7l-hIttIRc6E8");async function f(a=1,b=10){let c=(a-1)*b,{data:d,error:g,count:h}=await e.from("usuarios").select("id, rut, nombres, apellidos, email, status, fecha_nacimiento, sexo(id, nombre), role:roles(id, nombre_rol)",{count:"exact"}).order("rut",{ascending:!0}).range(c,c+b-1);if(g)throw console.error("Error fetching staff:",g),Error("Could not fetch staff data.");return{data:d,totalCount:h||0}}async function g(){let{count:a,error:b}=await e.from("usuarios").select("id",{count:"exact",head:!0});if(b)throw console.error("Error fetching staff count:",b),Error("Could not fetch staff count.");return a||0}async function h(){let{count:a,error:b}=await e.from("estudiantes_detalles").select("id",{count:"exact",head:!0});if(b)throw console.error("Error fetching student count:",b),Error("Could not fetch student count.");return a||0}async function i(a=3){let{data:b,error:c}=await e.from("estudiantes_detalles").select("nro_registro, fecha_matricula, curso:cursos(id, nivel, letra), usuario:usuarios(nombres, apellidos)").order("fecha_matricula",{ascending:!1}).limit(a);if(c)throw console.error("Error fetching recent enrollments:",c),Error("Could not fetch recent enrollments.");return b.map(a=>({name:`${a.usuario.nombres} ${a.usuario.apellidos}`,grade:a.curso?.nivel?`${a.curso.nivel}\xba Medio ${a.curso.letra}`:null,enrollmentDate:a.fecha_matricula}))}async function j(a=3){let{data:b,error:c}=await e.from("usuarios").select("nombres, apellidos").limit(a);if(c)throw console.error("Error fetching recent staff activity:",c),Error("Could not fetch recent staff activity.");return b.map(a=>({name:`${a.nombres} ${a.apellidos}`,action:"realiz\xf3 alguna acci\xf3n."}))}async function k(){let{data:a,error:b}=await e.from("sexo").select("id, nombre");if(b)throw console.error("Error fetching sexos:",b),Error("Could not fetch sexos data.");return a.map(a=>({...a,id:String(a.id)}))}async function l(){let{data:a,error:b}=await e.from("roles").select("id, nombre_rol");if(b)throw console.error("Error fetching roles:",b),Error("Could not fetch roles data.");return a.map(a=>({...a,id:String(a.id)}))}async function m(a){let{data:b,error:c}=await e.from("roles").select("id").eq("nombre_rol",a).single();if(c&&"PGRST116"!==c.code)throw console.error(`Error fetching role ID for ${a}:`,c),Error(`Could not fetch role ID for ${a}.`);return b?String(b.id):null}async function n(a){let{email:b,password:c,...d}=a,{data:f,error:g}=await e.auth.signUp({email:b,password:c});if(g)throw console.error("Error signing up user:",g),Error(g.message);let{data:h,error:i}=await e.from("usuarios").insert({id:f.user?.id,rut:d.rut,nombres:d.nombres,apellidos:d.apellidos,sexo_id:d.sexo_id,email:b,rol_id:d.rol_id,fecha_nacimiento:d.fecha_nacimiento,telefono:d.telefono||null,direccion:d.direccion||null}).select("id, rut, nombres, apellidos, email, status, sexo(id, nombre), role:roles(id, nombre_rol)").single();if(i)throw console.error("Error inserting staff data:",i),Error(i.message);return h}async function o(a,b,c){let{email:d,password:f,...g}=b;if(d||f){let a={};if(d&&(a.email=d),f&&(a.password=f),!c)throw Error("User ID is required to update email or password.");let{data:b,error:h}=await e.auth.admin.updateUserById(c,a);if(h)throw console.error("Error updating auth user:",h),Error(h.message);d&&(g.email=d)}let{data:h,error:i}=await e.from("usuarios").update(g).eq("rut",a);if(i)throw console.error("Error updating staff data:",i),Error(i.message);return h}async function p(a){let{data:b,error:c}=await e.from("usuarios").select("id, rut, nombres, apellidos, email, status, sexo(id, nombre), role:roles(id, nombre_rol), telefono, direccion, fecha_nacimiento").eq("rut",a).single();if(c&&"PGRST116"!==c.code)throw console.error("Error fetching staff by RUT:",c),Error("No se pudo buscar el personal por RUT.");return b}async function q(a=1,b=10){let{data:c,error:d,count:f}=await e.from("estudiantes_detalles").select("nro_registro, fecha_matricula, fecha_retiro, curso:cursos(id, nivel, letra), usuario:usuarios(id, rut, nombres, apellidos, fecha_nacimiento, sexo:sexo(id, nombre), email, telefono, direccion)",{count:"exact"}).order("nro_registro",{ascending:!0}).range((a-1)*b,a*b-1);if(d)throw console.error("Error fetching students:",d),Error("Could not fetch student data.");return{students:c.map(a=>{let b={...a.usuario,...a,id:a.nro_registro,userId:a.usuario.id,grade:a.curso?.nivel?`${a.curso.nivel}\xba Medio ${a.curso.letra}`:null,enrollmentDate:a.fecha_matricula};return b.sexo=a.usuario.sexo,b.curso=a.curso,b}),totalCount:f||0}}async function r(){let{data:a,error:b}=await e.from("cursos").select("id, nivel, letra");if(b)throw console.error("Error fetching courses:",b),Error("Could not fetch courses data.");return a.map(a=>({id:String(a.id),nombre:`${a.nivel}\xba Medio ${a.letra}`}))}async function s(){let{count:a,error:b}=await e.from("cursos").select("id",{count:"exact",head:!0});if(b)throw console.error("Error fetching course count:",b),Error("Could not fetch course count.");return a||0}async function t(a,b=null){let{email:c,password:d,...f}=a,g=d||Math.random().toString(36).substring(2,15),{data:h,error:i}=await e.auth.signUp({email:c,password:g});if(i)throw console.error("Error signing up user:",i),Error(i.message);let{data:j,error:k}=await e.from("usuarios").insert({id:h.user?.id,rut:f.rut,nombres:f.nombres,apellidos:f.apellidos,sexo_id:f.sexo_id,email:c,fecha_nacimiento:f.fecha_nacimiento,telefono:f.phone||null,direccion:f.address||null,rol_id:b}).select("id").single();if(k)throw console.error("Error inserting user data:",k),Error(k.message);return j.id}async function u(a){let{data:b,error:c}=await e.from("estudiantes_detalles").select("id").eq("id",a.usuario).maybeSingle();if(c)throw console.error("Error checking for existing student:",c),Error("Error al verificar la matr\xedcula del estudiante.");if(b)throw Error("El usuario ya se encuentra matriculado como estudiante.");let{data:d,error:f}=await e.from("estudiantes_detalles").insert([{id:a.usuario,nro_registro:a.id,curso_id:a.curso_id,fecha_matricula:a.enrollmentDate}]).select().single();if(f)throw console.error("Error inserting student data:",f),Error(f.message);return d}async function v(a,b){let{nombres:c,apellidos:d,sexo_id:f,fecha_nacimiento:g,telefono:h,direccion:i,curso_id:j,fecha_matricula:k,fecha_retiro:l}=b,{error:m}=await e.from("usuarios").update({nombres:c,apellidos:d,sexo_id:f,fecha_nacimiento:g,telefono:h,direccion:i}).eq("id",a);if(m)throw console.error("Error updating student user data:",m),Error("Could not update student user data.");let{error:n}=await e.from("estudiantes_detalles").update({curso_id:j,fecha_matricula:k,fecha_retiro:l}).eq("id",a);if(n)throw console.error("Error updating student details:",n),Error("Could not update student details.");let{data:o,error:p}=await e.from("estudiantes_detalles").select("nro_registro, fecha_matricula, fecha_retiro, curso:cursos(id, nivel, letra), usuario:usuarios(id, rut, nombres, apellidos, fecha_nacimiento, sexo:sexo(id, nombre), email, telefono, direccion)").eq("id",a).single();if(p)throw console.error("Error fetching updated student data:",p),Error("Could not fetch updated student data.");let q={...o.usuario,...o,id:o.nro_registro,userId:o.usuario.id,grade:o.curso?.nivel?`${o.curso.nivel}\xba Medio ${o.curso.letra}`:null,enrollmentDate:o.fecha_matricula};return q.sexo=o.usuario.sexo,q.curso=o.curso,q}(0,c(40410).D)([f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v]),(0,d.A)(f,"60cd058ff78f4a8e7648e6ec640098af9e28bf9e17",null),(0,d.A)(g,"00a68141e975802a2708f75280ec7521fef4a9a3b8",null),(0,d.A)(h,"0052af3a95d8758bd4c48d47869a5cab9c528e4108",null),(0,d.A)(i,"408024dd826fa7664888a180d2acdf049cfb9163b5",null),(0,d.A)(j,"40048d31d4df527827fcadf8904e3c098844446ac1",null),(0,d.A)(k,"00b916b4d35a07a5c12206f4c442effdf0acf91981",null),(0,d.A)(l,"003e53687e330fc704fa85b6a3451d8bee3c150e02",null),(0,d.A)(m,"4072d8b33c0328022b53ec6a098e4c52f0b26b6020",null),(0,d.A)(n,"40a1b9d81f62360b76f599c8da48a6fb18841c657b",null),(0,d.A)(o,"7016069dff30a9bb18d912a27e1eb8eb891d8194c7",null),(0,d.A)(p,"406470cb13a121586ae2d149509168abef4d87f656",null),(0,d.A)(q,"60713247e77ce4cb6d2a2f7f2be558bd1e8f9ed33b",null),(0,d.A)(r,"008a90e06fcfebcb5d2335cb3620a29c2cbe9ac207",null),(0,d.A)(s,"0082d0079513fd4c5c13cfe3c858682f91a9efa171",null),(0,d.A)(t,"60bd0646e89e3f2167cc922d02e8c57fb1279cc1c9",null),(0,d.A)(u,"40ab7bcfb75dd71eedd7027941ba4a90f61f0ba607",null),(0,d.A)(v,"606302831770c65338865903cb0870eefa29d345a0",null)},62186:(a,b,c)=>{c.d(b,{Wu:()=>j,ZB:()=>i,Zp:()=>g,aR:()=>h});var d=c(21124),e=c(38301),f=c(44943);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));g.displayName="Card";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));h.displayName="CardHeader";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));i.displayName="CardTitle",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b})).displayName="CardDescription";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));j.displayName="CardContent",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter"}};