(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{2633:(e,s,l)=>{Promise.resolve().then(l.bind(l,3592))},3592:(e,s,l)=>{"use strict";l.d(s,{StaffList:()=>L});var r=l(5155),n=l(2115),a=l(7270),t=l(3998),i=l(5142),c=l(1834),o=l(3101),d=l(4269);let x=(0,o.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function m(e){let{className:s,variant:l,...n}=e;return(0,r.jsx)("div",{className:(0,d.cn)(x({variant:l}),s),...n})}var h=l(4294);let j=(0,h.A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),u=(0,h.A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var p=l(109),f=l(2452),N=l(2544),v=l(6942),g=l(5653),b=l(3281),C=l(1186),z=l(5894),y=l(926);let S=(0,y.createServerReference)("4004060dc771708969556548c6422c8617f0d2e4b8",y.callServer,void 0,y.findSourceMapURL,"addStaff");var _=l(2033);let w=g.z.object({rut:g.z.string().refine(d.y,{message:"RUT inv\xe1lido."}),nombres:g.z.string().min(2,"Los nombres deben tener al menos 2 caracteres."),apellidos:g.z.string().min(2,"Los apellidos deben tener al menos 2 caracteres."),sexo_id:g.z.string({required_error:"Debe seleccionar un sexo."}),password:g.z.string().min(6,"La contrase\xf1a debe tener al menos 6 caracteres."),email:g.z.string().email("Email inv\xe1lido."),rol_id:g.z.string({required_error:"Debe seleccionar un rol."}),fecha_nacimiento:g.z.string({required_error:"Debe seleccionar una fecha de nacimiento."}).refine(e=>{let s=new Date(e),l=new Date().getFullYear(),r=s.getFullYear(),n=s.getMonth()+1,a=s.getDate();return!(isNaN(s.getTime())||r<1900||r>l||n<1||n>12||a<1||a>31||a>new Date(r,n,0).getDate())},{message:"La fecha de nacimiento no es v\xe1lida. Aseg\xfarese de que el formato sea DD/MM/YYYY y el a\xf1o est\xe9 entre 1900 y el actual."}),telefono:g.z.string().optional(),direccion:g.z.string().optional()});function M(e){let{onStaffAdded:s,sexos:l,roles:a}=e,{toast:c}=(0,z.dj)(),[o,d]=(0,n.useState)(!1),x=(0,N.mN)({resolver:(0,v.u)(w),defaultValues:{rut:"",nombres:"",apellidos:"",sexo_id:"",password:"",email:"",rol_id:"",telefono:"",direccion:""}});async function m(e){d(!0);try{let l=new Date(e.fecha_nacimiento),r={rut:e.rut,nombres:e.nombres,apellidos:e.apellidos,sexo_id:e.sexo_id,email:e.email,rol_id:e.rol_id,fecha_nacimiento:l.toISOString(),telefono:e.telefono||null,direccion:e.direccion||null},n=await S({...r,password:e.password});s(n),c({title:"Personal A\xf1adido",description:"".concat(e.nombres," ").concat(e.apellidos," ha sido a\xf1adido al sistema.")}),x.reset()}catch(e){c({title:"Error al a\xf1adir personal",description:e.message||"Ocurri\xf3 un error desconocido.",variant:"destructive"})}finally{d(!1)}}return(0,r.jsx)(b.lV,{...x,children:(0,r.jsxs)("form",{onSubmit:x.handleSubmit(m),className:"grid grid-cols-2 gap-x-8 gap-y-4 pt-4",children:[(0,r.jsx)(b.zB,{control:x.control,name:"rut",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"RUT*"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{placeholder:"Ej: 12.345.678-9",...s})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:x.control,name:"nombres",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Nombres*"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{placeholder:"Ej: Ricardo",...s})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:x.control,name:"apellidos",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Apellidos*"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{placeholder:"Ej: P\xe9rez D\xedaz",...s})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:x.control,name:"sexo_id",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Sexo*"}),(0,r.jsxs)(C.l6,{onValueChange:s.onChange,value:s.value,children:[(0,r.jsx)(b.MJ,{children:(0,r.jsx)(C.bq,{children:(0,r.jsx)(C.yv,{placeholder:"Seleccione el sexo"})})}),(0,r.jsx)(C.gC,{children:l.map(e=>(0,r.jsx)(C.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:x.control,name:"email",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Email*"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{placeholder:"ejemplo@acad.link",...s})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:x.control,name:"password",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Contrase\xf1a*"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{type:"password",placeholder:"********",...s})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:x.control,name:"rol_id",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Rol*"}),(0,r.jsxs)(C.l6,{onValueChange:s.onChange,value:s.value,children:[(0,r.jsx)(b.MJ,{children:(0,r.jsx)(C.bq,{children:(0,r.jsx)(C.yv,{placeholder:"Seleccione un rol"})})}),(0,r.jsx)(C.gC,{children:a.map(e=>(0,r.jsx)(C.eb,{value:e.id,children:e.nombre_rol},e.id))})]}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:x.control,name:"fecha_nacimiento",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{className:"col-span-2",children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Fecha de Nacimiento*"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{type:"date",placeholder:"YYYY-MM-DD",...s,value:s.value?s.value.split("T")[0]:""})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:x.control,name:"telefono",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Tel\xe9fono"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{placeholder:"Ej: +56912345678",...s})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:x.control,name:"direccion",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Direcci\xf3n"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{placeholder:"Ej: Calle Falsa 123",...s})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)("div",{className:"col-span-2 flex justify-end pt-2",children:(0,r.jsxs)(t.$,{type:"submit",disabled:o,children:[o&&(0,r.jsx)(_.A,{className:"mr-2 h-4 w-4 animate-spin"}),"A\xf1adir"]})})]})})}let R=(0,y.createServerReference)("70701eea129b280ac887926ab7529f6887d0e01d9b",y.callServer,void 0,y.findSourceMapURL,"updateStaff"),A=g.z.object({rut:g.z.string().refine(d.y,{message:"RUT inv\xe1lido."}),nombres:g.z.string().min(2,"Los nombres deben tener al menos 2 caracteres."),apellidos:g.z.string().min(2,"Los apellidos deben tener al menos 2 caracteres."),sexo_id:g.z.string({required_error:"Debe seleccionar un sexo."}),email:g.z.string().email("Email inv\xe1lido."),rol_id:g.z.string({required_error:"Debe seleccionar un rol."}),fecha_nacimiento:g.z.string({required_error:"Debe seleccionar una fecha de nacimiento."}).refine(e=>!isNaN(new Date(e).getTime()),{message:"La fecha de nacimiento no es v\xe1lida."}),telefono:g.z.string().optional(),direccion:g.z.string().optional()});function E(e){var s,l;let{staff:a,onStaffUpdated:c,sexos:o,roles:d}=e,{toast:x}=(0,z.dj)(),[m,h]=(0,n.useState)(!1),j=(0,N.mN)({resolver:(0,v.u)(A),defaultValues:{rut:a.rut,nombres:a.nombres,apellidos:a.apellidos,sexo_id:(null==(s=a.sexo)?void 0:s.id)||"",email:a.email,rol_id:(null==(l=a.role)?void 0:l.id)||"",fecha_nacimiento:a.fecha_nacimiento?a.fecha_nacimiento.substring(0,10):"",telefono:a.telefono||"",direccion:a.direccion||""}});async function u(e){h(!0);try{let s=new Date(e.fecha_nacimiento),l={nombres:e.nombres,apellidos:e.apellidos,sexo_id:e.sexo_id,rol_id:e.rol_id,fecha_nacimiento:s.toISOString(),telefono:e.telefono||null,direccion:e.direccion||null};await R(a.rut,l,a.id);let r={...a,...l,sexo:o.find(s=>s.id===e.sexo_id)||null,role:d.find(s=>s.id===e.rol_id)||null};c(r),x({title:"Personal Actualizado",description:"".concat(e.nombres," ").concat(e.apellidos," ha sido actualizado.")})}catch(e){x({title:"Error al actualizar personal",description:e.message||"Ocurri\xf3 un error desconocido.",variant:"destructive"})}finally{h(!1)}}return(0,r.jsx)(b.lV,{...j,children:(0,r.jsxs)("form",{onSubmit:j.handleSubmit(u),className:"grid grid-cols-2 gap-x-8 gap-y-4 pt-4",children:[(0,r.jsx)(b.zB,{control:j.control,name:"rut",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"RUT"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{...s,disabled:!0})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:j.control,name:"email",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Email"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{...s,disabled:!0})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:j.control,name:"nombres",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Nombres*"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{placeholder:"Ej: Ricardo",...s})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:j.control,name:"apellidos",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Apellidos*"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{placeholder:"Ej: P\xe9rez D\xedaz",...s})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:j.control,name:"sexo_id",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Sexo*"}),(0,r.jsxs)(C.l6,{onValueChange:s.onChange,value:s.value,children:[(0,r.jsx)(b.MJ,{children:(0,r.jsx)(C.bq,{children:(0,r.jsx)(C.yv,{placeholder:"Seleccione el sexo"})})}),(0,r.jsx)(C.gC,{children:o.map(e=>(0,r.jsx)(C.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:j.control,name:"rol_id",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Rol*"}),(0,r.jsxs)(C.l6,{onValueChange:s.onChange,value:s.value,children:[(0,r.jsx)(b.MJ,{children:(0,r.jsx)(C.bq,{children:(0,r.jsx)(C.yv,{placeholder:"Seleccione un rol"})})}),(0,r.jsx)(C.gC,{children:d.map(e=>(0,r.jsx)(C.eb,{value:e.id,children:e.nombre_rol},e.id))})]}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:j.control,name:"fecha_nacimiento",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{className:"col-span-2",children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Fecha de Nacimiento*"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{type:"date",placeholder:"YYYY-MM-DD",...s,value:s.value?s.value.substring(0,10):""})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:j.control,name:"telefono",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Tel\xe9fono"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{placeholder:"Ej: +56912345678",...s})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)(b.zB,{control:j.control,name:"direccion",render:e=>{let{field:s}=e;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{className:"text-xs sm:text-sm",children:"Direcci\xf3n"}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(i.p,{placeholder:"Ej: Calle Falsa 123",...s})}),(0,r.jsx)(b.C5,{className:"text-xs sm:text-sm"})]})}}),(0,r.jsx)("div",{className:"col-span-2 flex justify-end pt-2",children:(0,r.jsxs)(t.$,{type:"submit",disabled:m,children:[m&&(0,r.jsx)(_.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Actualizar"]})})]})})}var D=l(6948),k=l(243);let I=(0,y.createServerReference)("602ee618425cd4dda55e7a0e45ff057f5b3356defa",y.callServer,void 0,y.findSourceMapURL,"getStaff");var B=l(6205);let J=(0,y.createServerReference)("003ec406852283d818892c959c11733234c31ce1ba",y.callServer,void 0,y.findSourceMapURL,"getRoles");function L(){let[e,s]=(0,n.useState)([]),[l,o]=(0,n.useState)([]),[x,h]=(0,n.useState)([]),[N,v]=(0,n.useState)(!0),[g,b]=(0,n.useState)(""),[C,y]=(0,n.useState)(!1),[S,_]=(0,n.useState)(!1),[w,R]=(0,n.useState)(null),[A,L]=(0,n.useState)({key:null,direction:"ascending"}),{toast:Y}=(0,z.dj)(),[q,P]=(0,n.useState)(1),[T]=(0,n.useState)(10),[U,F]=(0,n.useState)(0),V=(0,n.useMemo)(()=>Math.ceil(U/T),[U,T]);(0,n.useEffect)(()=>{(async()=>{v(!0);try{let[{staff:e,totalCount:l},r,n]=await Promise.all([I(q,T),(0,B.T)(),J()]);s(e),F(l),o(r),h(n)}catch(e){console.error("Failed to fetch initial data",e),Y({title:"Error de Carga",description:"No se pudieron cargar los datos del personal.",variant:"destructive"})}finally{v(!1)}})()},[q,T,Y]);let $=(0,n.useMemo)(()=>e.filter(e=>"".concat(e.nombres," ").concat(e.apellidos).toLowerCase().includes(g.toLowerCase())||e.email.toLowerCase().includes(g.toLowerCase())),[e,g]),O=(0,n.useMemo)(()=>{let e=[...$];return null!==A.key&&e.sort((e,s)=>{let l,r;if("nombreCompleto"===A.key)l="".concat(e.nombres," ").concat(e.apellidos),r="".concat(s.nombres," ").concat(s.apellidos);else if("rol"===A.key){var n,a;l=(null==(n=e.role)?void 0:n.nombre_rol)||"",r=(null==(a=s.role)?void 0:a.nombre_rol)||""}else l=e[A.key],r=s[A.key];return l<r?"ascending"===A.direction?-1:1:l>r?"ascending"===A.direction?1:-1:0}),e},[$,A]),H=e=>{let s="descending";A.key===e&&"descending"===A.direction&&(s="ascending"),L({key:e,direction:s})},G=e=>A.key!==e?null:"ascending"===A.direction?(0,r.jsx)(j,{className:"ml-2 h-4 w-4"}):(0,r.jsx)(u,{className:"ml-2 h-4 w-4"});return(0,r.jsxs)(c.lG,{open:C,onOpenChange:y,children:[(0,r.jsx)(D.Zp,{children:(0,r.jsxs)(D.Wu,{className:"p-2 sm:p-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,r.jsx)(p.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(i.p,{placeholder:"Buscar...",value:g,onChange:e=>b(e.target.value),className:"pl-10"})]}),(0,r.jsx)(c.zM,{asChild:!0,children:(0,r.jsxs)(t.$,{className:"w-full sm:w-auto",children:[(0,r.jsx)(f.A,{className:"mr-0 h-4 w-4 md:mr-2"}),(0,r.jsx)("span",{className:"hidden md:inline",children:"A\xf1adir Personal"})]})})]}),(0,r.jsx)("div",{className:"rounded-lg border",children:N?(0,r.jsx)(()=>(0,r.jsxs)(a.XI,{children:[(0,r.jsx)(a.A0,{children:(0,r.jsxs)(a.Hj,{children:[(0,r.jsx)(a.nd,{className:"p-2 sm:p-4",children:(0,r.jsx)(k.E,{className:"h-6 w-20"})}),(0,r.jsx)(a.nd,{className:"p-2 sm:p-4",children:(0,r.jsx)(k.E,{className:"h-6 w-32"})}),(0,r.jsx)(a.nd,{className:"hidden sm:table-cell p-2 sm:p-4",children:(0,r.jsx)(k.E,{className:"h-6 w-16"})}),(0,r.jsx)(a.nd,{className:"hidden md:table-cell p-2 sm:p-4",children:(0,r.jsx)(k.E,{className:"h-6 w-40"})}),(0,r.jsx)(a.nd,{className:"p-2 sm:p-4",children:(0,r.jsx)(k.E,{className:"h-6 w-20"})}),(0,r.jsx)(a.nd,{className:"p-2 sm:p-4",children:(0,r.jsx)(k.E,{className:"h-6 w-20"})}),(0,r.jsx)(a.nd,{className:"text-right p-2 sm:p-4",children:(0,r.jsx)(k.E,{className:"h-6 w-16"})})]})}),(0,r.jsx)(a.BF,{children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)(a.Hj,{className:"text-xs sm:text-sm",children:(0,r.jsx)(a.nA,{colSpan:7,children:(0,r.jsx)(k.E,{className:"h-8 w-full"})})},s))})]}),{}):(0,r.jsxs)(a.XI,{children:[(0,r.jsx)(a.A0,{children:(0,r.jsxs)(a.Hj,{children:[(0,r.jsx)(a.nd,{className:"p-2 sm:p-4",children:(0,r.jsxs)(t.$,{variant:"ghost",onClick:()=>H("rut"),children:["RUT ",G("rut")]})}),(0,r.jsx)(a.nd,{className:"p-2 sm:p-4",children:(0,r.jsxs)(t.$,{variant:"ghost",onClick:()=>H("nombreCompleto"),children:["Nombre ",G("nombreCompleto")]})}),(0,r.jsx)(a.nd,{className:"hidden sm:table-cell p-2 sm:p-4",children:"Sexo"}),(0,r.jsx)(a.nd,{className:"hidden md:table-cell p-2 sm:p-4",children:"Email"}),(0,r.jsx)(a.nd,{className:"p-2 sm:p-4",children:(0,r.jsxs)(t.$,{variant:"ghost",onClick:()=>H("rol"),children:["Rol ",G("rol")]})}),(0,r.jsx)(a.nd,{className:"p-2 sm:p-4",children:(0,r.jsxs)(t.$,{variant:"ghost",onClick:()=>H("status"),children:["Estado ",G("status")]})}),(0,r.jsx)(a.nd,{className:"text-right p-2 sm:p-4",children:"Acciones"})]})}),(0,r.jsx)(a.BF,{children:O.length>0?O.map(e=>{var s,l;return(0,r.jsxs)(a.Hj,{className:"text-xs sm:text-sm",children:[(0,r.jsx)(a.nA,{className:"font-medium p-2 sm:p-4",children:(0,d.P)(e.rut)}),(0,r.jsx)(a.nA,{className:"p-2 sm:p-4",children:"".concat(e.nombres," ").concat(e.apellidos)}),(0,r.jsx)(a.nA,{className:"hidden sm:table-cell p-2 sm:p-4",children:null==(s=e.sexo)?void 0:s.nombre}),(0,r.jsx)(a.nA,{className:"hidden md:table-cell p-2 sm:p-4",children:e.email}),(0,r.jsx)(a.nA,{className:"p-2 sm:p-4",children:null==(l=e.role)?void 0:l.nombre_rol}),(0,r.jsx)(a.nA,{className:"p-2 sm:p-4",children:(0,r.jsx)(m,{variant:e.status?"default":"secondary",children:e.status?"Activo":"Inactivo"})}),(0,r.jsx)(a.nA,{className:"text-right p-2 sm:p-4",children:(0,r.jsx)(t.$,{variant:"ghost",size:"sm",onClick:()=>{R(e),_(!0)},children:"Editar"})})]},e.rut)}):(0,r.jsx)(a.Hj,{children:(0,r.jsx)(a.nA,{colSpan:7,className:"h-24 text-center",children:"No se encontr\xf3 personal."})})})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Mostrando ",O.length," de ",U," personal"]}),(0,r.jsxs)("div",{className:"space-x-2 flex items-center",children:[(0,r.jsx)(t.$,{variant:"outline",size:"sm",onClick:()=>{P(e=>Math.max(1,e-1))},disabled:1===q,children:"Anterior"}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["P\xe1gina ",q," de ",V]}),(0,r.jsx)(t.$,{variant:"outline",size:"sm",onClick:()=>{P(e=>Math.min(V,e+1))},disabled:q===V,children:"Siguiente"})]})]})]})}),(0,r.jsxs)(c.Cf,{className:"sm:max-w-2xl",children:[(0,r.jsxs)(c.c7,{children:[(0,r.jsx)(c.L3,{className:"font-headline",children:"Nuevo Personal"}),(0,r.jsx)(c.rr,{children:"Complete los datos para crear una nueva cuenta."})]}),(0,r.jsx)(M,{onStaffAdded:e=>{F(e=>e+1),P(1),y(!1)},sexos:l,roles:x})]}),w&&(0,r.jsx)(c.lG,{open:S,onOpenChange:_,children:(0,r.jsxs)(c.Cf,{className:"sm:max-w-2xl",children:[(0,r.jsxs)(c.c7,{children:[(0,r.jsx)(c.L3,{className:"font-headline",children:"Editar Personal"}),(0,r.jsx)(c.rr,{children:"Actualice los datos del miembro del personal."})]}),(0,r.jsx)(E,{staff:w,onStaffUpdated:e=>{s(s=>s.map(s=>s.rut===e.rut?e:s)),_(!1),R(null)},sexos:l,roles:x})]})})]})}}},e=>{e.O(0,[723,690,686,441,255,358],()=>e(e.s=2633)),_N_E=e.O()}]);