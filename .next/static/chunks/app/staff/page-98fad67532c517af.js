(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{2633:(e,s,a)=>{Promise.resolve().then(a.bind(a,4673))},4673:(e,s,a)=>{"use strict";a.d(s,{StaffList:()=>H});var l=a(5155),t=a(2115),r=a(7270),n=a(3998),o=a(5142),i=a(1834),c=a(3101),d=a(4269);let m=(0,c.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function x(e){let{className:s,variant:a,...t}=e;return(0,l.jsx)("div",{className:(0,d.cn)(m({variant:a}),s),...t})}var h=a(2240),u=a(1165),j=a(109),p=a(2452),f=a(146),b=a(2544),N=a(6942),g=a(5653),v=a(3281),y=a(1186),w=a(5894),_=a(926);let C=(0,_.createServerReference)("402af8a0e67bde41a0038e3abdbaa0454daf103810",_.callServer,void 0,_.findSourceMapURL,"addStaff"),z=g.z.object({rut:g.z.string().refine(d.y,{message:"RUT inv\xe1lido."}),nombres:g.z.string().min(2,"Los nombres deben tener al menos 2 caracteres."),apellidos:g.z.string().min(2,"Los apellidos deben tener al menos 2 caracteres."),sexo_id:g.z.string({required_error:"Debe seleccionar un sexo."}),password:g.z.string().min(6,"La contrase\xf1a debe tener al menos 6 caracteres."),email:g.z.string().email("Email inv\xe1lido."),rol_id:g.z.string({required_error:"Debe seleccionar un rol."}),fecha_de_nacimiento:g.z.string({required_error:"Debe seleccionar una fecha de nacimiento."}).refine(e=>{let s=new Date(e),a=new Date().getFullYear(),l=s.getFullYear(),t=s.getMonth()+1,r=s.getDate();return!(isNaN(s.getTime())||l<1900||l>a||t<1||t>12||r<1||r>31||r>new Date(l,t,0).getDate())},{message:"La fecha de nacimiento no es v\xe1lida. Aseg\xfarese de que el formato sea DD/MM/YYYY y el a\xf1o est\xe9 entre 1900 y el actual."}),telefono:g.z.string().optional(),direccion:g.z.string().optional()});function S(e){let{onStaffAdded:s,sexos:a,roles:r}=e,{toast:i}=(0,w.dj)(),[c,d]=(0,t.useState)(!1),m=(0,b.mN)({resolver:(0,N.u)(z),defaultValues:{rut:"",nombres:"",apellidos:"",sexo_id:"",password:"",email:"",rol_id:"",telefono:"",direccion:""}});async function x(e){d(!0);try{let a=new Date(e.fecha_de_nacimiento),l={rut:e.rut,nombres:e.nombres,apellidos:e.apellidos,sexo_id:e.sexo_id,email:e.email,rol_id:e.rol_id,fecha_de_nacimiento:a.toISOString(),telefono:e.telefono||null,direccion:e.direccion||null},t=await C({...l,password:e.password});s(t),i({title:"Personal A\xf1adido",description:"".concat(e.nombres," ").concat(e.apellidos," ha sido a\xf1adido al sistema.")}),m.reset()}catch(e){i({title:"Error al a\xf1adir personal",description:e.message||"Ocurri\xf3 un error desconocido.",variant:"destructive"})}finally{d(!1)}}return(0,l.jsx)(v.lV,{...m,children:(0,l.jsxs)("form",{onSubmit:m.handleSubmit(x),className:"grid grid-cols-2 gap-4 pt-4",children:[(0,l.jsx)(v.zB,{control:m.control,name:"rut",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"RUT"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{placeholder:"Ej: 12.345.678-9",...s})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:m.control,name:"nombres",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Nombres"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{placeholder:"Ej: Ricardo",...s})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:m.control,name:"apellidos",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Apellidos"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{placeholder:"Ej: P\xe9rez D\xedaz",...s})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:m.control,name:"sexo_id",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Sexo"}),(0,l.jsxs)(y.l6,{onValueChange:s.onChange,value:s.value,children:[(0,l.jsx)(v.MJ,{children:(0,l.jsx)(y.bq,{children:(0,l.jsx)(y.yv,{placeholder:"Seleccione el sexo"})})}),(0,l.jsx)(y.gC,{children:a.map(e=>(0,l.jsx)(y.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:m.control,name:"email",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Email"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{placeholder:"ejemplo@acad.link",...s})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:m.control,name:"password",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Contrase\xf1a"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{type:"password",placeholder:"********",...s})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:m.control,name:"rol_id",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Rol"}),(0,l.jsxs)(y.l6,{onValueChange:s.onChange,value:s.value,children:[(0,l.jsx)(v.MJ,{children:(0,l.jsx)(y.bq,{children:(0,l.jsx)(y.yv,{placeholder:"Seleccione un rol"})})}),(0,l.jsx)(y.gC,{children:r.map(e=>(0,l.jsx)(y.eb,{value:e.id,children:e.nombre_rol},e.id))})]}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:m.control,name:"fecha_de_nacimiento",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{className:"col-span-2",children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Fecha de Nacimiento"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{type:"date",placeholder:"YYYY-MM-DD",...s,value:s.value?s.value.split("T")[0]:""})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:m.control,name:"telefono",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Tel\xe9fono (Opcional)"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{placeholder:"Ej: +56912345678",...s})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:m.control,name:"direccion",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Direcci\xf3n (Opcional)"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{placeholder:"Ej: Calle Falsa 123",...s})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)("div",{className:"col-span-2 flex justify-end pt-2",children:(0,l.jsxs)(n.$,{type:"submit",disabled:c,children:[c&&(0,l.jsx)(Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"A\xf1adir"]})})]})})}let R=(0,_.createServerReference)("7050acc3b2eec5a8536e71fdf441cb4657c4123540",_.callServer,void 0,_.findSourceMapURL,"updateStaff");var M=a(1330);let A=g.z.object({nombres:g.z.string().min(2,"Los nombres deben tener al menos 2 caracteres."),apellidos:g.z.string().min(2,"Los apellidos deben tener al menos 2 caracteres."),sexo_id:g.z.string({required_error:"Debe seleccionar un sexo."}),rol_id:g.z.string({required_error:"Debe seleccionar un rol."}),fecha_de_nacimiento:g.z.string({required_error:"Debe seleccionar una fecha de nacimiento."}).refine(e=>{let s=new Date(e),a=new Date().getFullYear(),l=s.getFullYear(),t=s.getMonth()+1,r=s.getDate();return!(isNaN(s.getTime())||l<1900||l>a||t<1||t>12||r<1||r>31||r>new Date(l,t,0).getDate())},{message:"La fecha de nacimiento no es v\xe1lida. Aseg\xfarese de que el formato sea DD/MM/YYYY y el a\xf1o est\xe9 entre 1900 y el actual."}),telefono:g.z.string().optional(),direccion:g.z.string().optional()});function D(e){var s,a;let{staff:r,onStaffUpdated:i}=e,{toast:c}=(0,w.dj)(),[d,m]=(0,t.useState)(!1),[x,h]=(0,t.useState)([]),[u,j]=(0,t.useState)([]),p=(0,b.mN)({resolver:(0,N.u)(A),defaultValues:{nombres:r.nombres,apellidos:r.apellidos,sexo_id:(null==(s=r.sexo)?void 0:s.id)||"",rol_id:(null==(a=r.role)?void 0:a.id)||"",fecha_de_nacimiento:r.fecha_de_nacimiento?(0,M.GP)(new Date(r.fecha_de_nacimiento),"yyyy-MM-dd"):"",telefono:r.telefono||"",direccion:r.direccion||""}});async function f(e){m(!0);try{let s=new Date(e.fecha_de_nacimiento),a={nombres:e.nombres,apellidos:e.apellidos,sexo_id:e.sexo_id,rol_id:e.rol_id,fecha_nacimiento:s.toISOString(),telefono:e.telefono||null,direccion:e.direccion||null};await R(r.rut,a);let l={...r,nombres:e.nombres,apellidos:e.apellidos,sexo:x.find(s=>s.id===e.sexo_id)||null,role:u.find(s=>s.id===e.rol_id)||null,fecha_de_nacimiento:s.toISOString(),telefono:e.telefono||null,direccion:e.direccion||null};i(l),c({title:"Personal Actualizado",description:"".concat(e.nombres," ").concat(e.apellidos," ha sido actualizado.")})}catch(e){c({title:"Error al actualizar personal",description:e.message||"Ocurri\xf3 un error desconocido.",variant:"destructive"})}finally{m(!1)}}return(0,l.jsx)(v.lV,{...p,children:(0,l.jsxs)("form",{onSubmit:p.handleSubmit(f),className:"grid grid-cols-2 gap-4 pt-4",children:[(0,l.jsx)(v.zB,{control:p.control,name:"nombres",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Nombres"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{placeholder:"Ej: Ricardo",...s})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:p.control,name:"apellidos",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Apellidos"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{placeholder:"Ej: P\xe9rez D\xedaz",...s})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:p.control,name:"sexo_id",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Sexo"}),(0,l.jsxs)(y.l6,{onValueChange:s.onChange,value:s.value,children:[(0,l.jsx)(v.MJ,{children:(0,l.jsx)(y.bq,{children:(0,l.jsx)(y.yv,{placeholder:"Seleccione el sexo"})})}),(0,l.jsx)(y.gC,{children:x.map(e=>(0,l.jsx)(y.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:p.control,name:"rol_id",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Rol"}),(0,l.jsxs)(y.l6,{onValueChange:s.onChange,value:s.value,children:[(0,l.jsx)(v.MJ,{children:(0,l.jsx)(y.bq,{children:(0,l.jsx)(y.yv,{placeholder:"Seleccione un rol"})})}),(0,l.jsx)(y.gC,{children:u.map(e=>(0,l.jsx)(y.eb,{value:e.id,children:e.nombre_rol},e.id))})]}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:p.control,name:"fecha_de_nacimiento",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{className:"col-span-2",children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Fecha de Nacimiento"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{type:"date",placeholder:"YYYY-MM-DD",...s,value:s.value?(0,M.GP)(new Date(s.value),"yyyy-MM-dd"):""})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:p.control,name:"telefono",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Tel\xe9fono (Opcional)"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{placeholder:"Ej: +56912345678",...s})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)(v.zB,{control:p.control,name:"direccion",render:e=>{let{field:s}=e;return(0,l.jsxs)(v.eI,{children:[(0,l.jsx)(v.lR,{className:"text-sm sm:text-base",children:"Direcci\xf3n (Opcional)"}),(0,l.jsx)(v.MJ,{children:(0,l.jsx)(o.p,{placeholder:"Ej: Calle Falsa 123",...s})}),(0,l.jsx)(v.C5,{className:"text-xs sm:text-sm"})]})}}),(0,l.jsx)("div",{className:"col-span-2 flex justify-end pt-2",children:(0,l.jsxs)(n.$,{type:"submit",disabled:d,children:[d&&(0,l.jsx)(Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Actualizar"]})})]})})}var E=a(186),L=a(3263),k=a(2251),I=a(5797);let Y=E.bL,B=E.l9;E.YJ,E.ZL,E.Pb,E.z6,t.forwardRef((e,s)=>{let{className:a,inset:t,children:r,...n}=e;return(0,l.jsxs)(E.ZP,{ref:s,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",a),...n,children:[r,(0,l.jsx)(L.A,{className:"ml-auto"})]})}).displayName=E.ZP.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(E.G5,{ref:s,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...t})}).displayName=E.G5.displayName;let J=t.forwardRef((e,s)=>{let{className:a,sideOffset:t=4,...r}=e;return(0,l.jsx)(E.ZL,{children:(0,l.jsx)(E.UC,{ref:s,sideOffset:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});J.displayName=E.UC.displayName;let O=t.forwardRef((e,s)=>{let{className:a,inset:t,...r}=e;return(0,l.jsx)(E.q7,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",a),...r})});O.displayName=E.q7.displayName,t.forwardRef((e,s)=>{let{className:a,children:t,checked:r,...n}=e;return(0,l.jsxs)(E.H_,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...n,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(E.VF,{children:(0,l.jsx)(k.A,{className:"h-4 w-4"})})}),t]})}).displayName=E.H_.displayName,t.forwardRef((e,s)=>{let{className:a,children:t,...r}=e;return(0,l.jsxs)(E.hN,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(E.VF,{children:(0,l.jsx)(I.A,{className:"h-2 w-2 fill-current"})})}),t]})}).displayName=E.hN.displayName;let P=t.forwardRef((e,s)=>{let{className:a,inset:t,...r}=e;return(0,l.jsx)(E.JU,{ref:s,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",a),...r})});P.displayName=E.JU.displayName;let q=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(E.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...t})});q.displayName=E.wv.displayName;var F=a(6948),U=a(243);let V=(0,_.createServerReference)("0013fabae5eb73acec1fa023ccab8ba512ef8af033",_.callServer,void 0,_.findSourceMapURL,"getStaff");var T=a(2492);let $=(0,_.createServerReference)("0032bf1d5f7402323c3c414e2286c9f221b3bb12f0",_.callServer,void 0,_.findSourceMapURL,"getRoles");function H(){let[e,s]=(0,t.useState)([]),[a,c]=(0,t.useState)([]),[m,b]=(0,t.useState)([]),[N,g]=(0,t.useState)(!0),[v,y]=(0,t.useState)(""),[_,C]=(0,t.useState)(!1),[z,M]=(0,t.useState)(!1),[A,E]=(0,t.useState)(null),[L,k]=(0,t.useState)({key:null,direction:"ascending"}),{toast:I}=(0,w.dj)();(0,t.useEffect)(()=>{(async()=>{g(!0);try{let[e,a,l]=await Promise.all([V(),(0,T.T)(),$()]);s(e),c(a),b(l)}catch(e){console.error("Failed to fetch initial data",e),I({title:"Error de Carga",description:"No se pudieron cargar los datos del personal.",variant:"destructive"})}finally{g(!1)}})()},[]);let H=(0,t.useMemo)(()=>e.filter(e=>"".concat(e.nombres," ").concat(e.apellidos).toLowerCase().includes(v.toLowerCase())||e.email.toLowerCase().includes(v.toLowerCase())),[e,v]),G=(0,t.useMemo)(()=>{let e=[...H];return null!==L.key&&e.sort((e,s)=>{let a,l;if("nombreCompleto"===L.key)a="".concat(e.nombres," ").concat(e.apellidos),l="".concat(s.nombres," ").concat(s.apellidos);else if("rol"===L.key){var t,r;a=(null==(t=e.role)?void 0:t.nombre_rol)||"",l=(null==(r=s.role)?void 0:r.nombre_rol)||""}else a=e[L.key],l=s[L.key];return a<l?"ascending"===L.direction?-1:1:a>l?"ascending"===L.direction?1:-1:0}),e},[H,L]),Z=async(e,a)=>{try{await R(e.rut,{status:a},e.id),s(s=>s.map(s=>s.rut===e.rut?{...s,status:a}:s)),I({title:"Estado Actualizado",description:"La cuenta de ".concat(e.nombres," ").concat(e.apellidos," ha sido ").concat(a?"activada":"desactivada",".")})}catch(e){I({title:"Error al actualizar estado",description:e.message||"Ocurri\xf3 un error desconocido.",variant:"destructive"})}},X=e=>{let s="descending";L.key===e&&"descending"===L.direction&&(s="ascending"),k({key:e,direction:s})},W=e=>L.key!==e?null:"ascending"===L.direction?(0,l.jsx)(h.A,{className:"ml-2 h-4 w-4"}):(0,l.jsx)(u.A,{className:"ml-2 h-4 w-4"});return(0,l.jsxs)(i.lG,{open:_,onOpenChange:C,children:[(0,l.jsx)(F.Zp,{children:(0,l.jsxs)(F.Wu,{className:"p-2 sm:p-4",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mb-4",children:[(0,l.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,l.jsx)(j.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(o.p,{placeholder:"Buscar...",value:v,onChange:e=>y(e.target.value),className:"pl-10"})]}),(0,l.jsx)(i.zM,{asChild:!0,children:(0,l.jsxs)(n.$,{className:"w-full sm:w-auto",children:[(0,l.jsx)(p.A,{className:"mr-0 h-4 w-4 md:mr-2"}),(0,l.jsx)("span",{className:"hidden md:inline",children:"A\xf1adir Personal"})]})})]}),(0,l.jsx)("div",{className:"rounded-lg border",children:N?(0,l.jsx)(()=>(0,l.jsxs)(r.XI,{children:[(0,l.jsx)(r.A0,{children:(0,l.jsxs)(r.Hj,{children:[(0,l.jsx)(r.nd,{className:"p-2 sm:p-4",children:(0,l.jsx)(U.E,{className:"h-6 w-20"})}),(0,l.jsx)(r.nd,{className:"p-2 sm:p-4",children:(0,l.jsx)(U.E,{className:"h-6 w-32"})}),(0,l.jsx)(r.nd,{className:"hidden sm:table-cell p-2 sm:p-4",children:(0,l.jsx)(U.E,{className:"h-6 w-16"})}),(0,l.jsx)(r.nd,{className:"hidden md:table-cell p-2 sm:p-4",children:(0,l.jsx)(U.E,{className:"h-6 w-40"})}),(0,l.jsx)(r.nd,{className:"p-2 sm:p-4",children:(0,l.jsx)(U.E,{className:"h-6 w-20"})}),(0,l.jsx)(r.nd,{className:"p-2 sm:p-4",children:(0,l.jsx)(U.E,{className:"h-6 w-20"})}),(0,l.jsx)(r.nd,{className:"text-right p-2 sm:p-4",children:(0,l.jsx)(U.E,{className:"h-6 w-16"})})]})}),(0,l.jsx)(r.BF,{children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,l.jsx)(r.Hj,{className:"text-xs sm:text-sm",children:(0,l.jsx)(r.nA,{colSpan:7,children:(0,l.jsx)(U.E,{className:"h-8 w-full"})})},s))})]}),{}):(0,l.jsxs)(r.XI,{children:[(0,l.jsx)(r.A0,{children:(0,l.jsxs)(r.Hj,{children:[(0,l.jsx)(r.nd,{className:"p-2 sm:p-4",children:(0,l.jsxs)(n.$,{variant:"ghost",onClick:()=>X("rut"),children:["RUT ",W("rut")]})}),(0,l.jsx)(r.nd,{className:"p-2 sm:p-4",children:(0,l.jsxs)(n.$,{variant:"ghost",onClick:()=>X("nombreCompleto"),children:["Nombre ",W("nombreCompleto")]})}),(0,l.jsx)(r.nd,{className:"hidden sm:table-cell p-2 sm:p-4",children:"Sexo"}),(0,l.jsx)(r.nd,{className:"hidden md:table-cell p-2 sm:p-4",children:"Email"}),(0,l.jsx)(r.nd,{className:"p-2 sm:p-4",children:(0,l.jsxs)(n.$,{variant:"ghost",onClick:()=>X("rol"),children:["Rol ",W("rol")]})}),(0,l.jsx)(r.nd,{className:"p-2 sm:p-4",children:(0,l.jsxs)(n.$,{variant:"ghost",onClick:()=>X("status"),children:["Estado ",W("status")]})}),(0,l.jsx)(r.nd,{className:"text-right p-2 sm:p-4",children:"Acciones"})]})}),(0,l.jsx)(r.BF,{children:G.length>0?G.map(e=>{var s,a;return(0,l.jsxs)(r.Hj,{className:"text-xs sm:text-sm",children:[(0,l.jsx)(r.nA,{className:"font-medium p-2 sm:p-4",children:(0,d.P)(e.rut)}),(0,l.jsx)(r.nA,{className:"p-2 sm:p-4",children:"".concat(e.nombres," ").concat(e.apellidos)}),(0,l.jsx)(r.nA,{className:"hidden sm:table-cell p-2 sm:p-4",children:null==(s=e.sexo)?void 0:s.nombre}),(0,l.jsx)(r.nA,{className:"hidden md:table-cell p-2 sm:p-4",children:e.email}),(0,l.jsx)(r.nA,{className:"p-2 sm:p-4",children:null==(a=e.role)?void 0:a.nombre_rol}),(0,l.jsx)(r.nA,{className:"p-2 sm:p-4",children:(0,l.jsx)(x,{variant:e.status?"default":"secondary",children:e.status?"Activo":"Inactivo"})}),(0,l.jsx)(r.nA,{className:"text-right p-2 sm:p-4",children:(0,l.jsxs)(Y,{children:[(0,l.jsx)(B,{asChild:!0,children:(0,l.jsxs)(n.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,l.jsx)("span",{className:"sr-only",children:"Abrir men\xfa"}),(0,l.jsx)(f.A,{className:"h-4 w-4"})]})}),(0,l.jsxs)(J,{align:"end",children:[(0,l.jsx)(P,{children:"Acciones"}),(0,l.jsx)(O,{onClick:()=>{E(e),M(!0)},children:"Editar informaci\xf3n"}),(0,l.jsx)(q,{}),e.status?(0,l.jsx)(O,{onClick:()=>Z(e,!1),children:"Desactivar cuenta"}):(0,l.jsx)(O,{onClick:()=>Z(e,!0),children:"Activar cuenta"})]})]})})]},e.rut)}):(0,l.jsx)(r.Hj,{children:(0,l.jsx)(r.nA,{colSpan:7,className:"h-24 text-center",children:"No se encontr\xf3 personal."})})})]})})]})}),(0,l.jsxs)(i.Cf,{className:"sm:max-w-md",children:[(0,l.jsxs)(i.c7,{children:[(0,l.jsx)(i.L3,{className:"font-headline",children:"Nuevo Personal"}),(0,l.jsx)(i.rr,{children:"Complete los datos para crear una nueva cuenta."})]}),(0,l.jsx)(S,{onStaffAdded:e=>{s(s=>[e,...s]),C(!1)},sexos:a,roles:m})]}),A&&(0,l.jsx)(i.lG,{open:z,onOpenChange:M,children:(0,l.jsxs)(i.Cf,{className:"sm:max-w-md",children:[(0,l.jsxs)(i.c7,{children:[(0,l.jsx)(i.L3,{className:"font-headline",children:"Editar Personal"}),(0,l.jsx)(i.rr,{children:"Actualice los datos del miembro del personal."})]}),(0,l.jsx)(D,{staff:A,onStaffUpdated:e=>{s(s=>s.map(s=>s.rut===e.rut?e:s)),M(!1),E(null)},sexos:a,roles:m})]})})]})}}},e=>{e.O(0,[723,28,650,635,441,255,358],()=>e(e.s=2633)),_N_E=e.O()}]);