(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[935],{273:(e,s,r)=>{"use strict";r.d(s,{StudentList:()=>A});var a=r(5155),n=r(2115),l=r(7270),t=r(3998),i=r(5142),c=r(1834),o=r(109),d=r(2452),x=r(2544),m=r(6942),u=r(5653),h=r(3281),j=r(7359),p=r(926);let f=(0,p.createServerReference)("0071b023988b93e79a2d698925739c41d6ab33c0dc",p.callServer,void 0,p.findSourceMapURL,"getCourses"),g=(0,p.createServerReference)("4064d01a4d397e50e0fc21be649b0781867b50b2a1",p.callServer,void 0,p.findSourceMapURL,"getRoleIdByName"),v=(0,p.createServerReference)("403c0985be0fda5558fa6e595df76d9834919212c1",p.callServer,void 0,p.findSourceMapURL,"getStaffByRut"),b=(0,p.createServerReference)("60240fd801bc679eb653074bcb53a28ebcafe1f270",p.callServer,void 0,p.findSourceMapURL,"createUser"),N=(0,p.createServerReference)("40cbe078d056226ef454c3a0a433fbe752585ce5b4",p.callServer,void 0,p.findSourceMapURL,"addStudent");var w=r(5894),S=r(2033),C=r(4269),z=r(1186);let _=u.z.object({id:u.z.string().min(1,"El n\xfamero de registro es requerido."),rut:u.z.string().refine(C.y,{message:"RUT inv\xe1lido."}),nombres:u.z.string().min(2,"El nombre debe tener al menos 2 caracteres."),apellidos:u.z.string().min(2,"Los apellidos deben tener al menos 2 caracteres."),sexo_id:u.z.string({required_error:"Debe seleccionar un sexo."}),fecha_nacimiento:u.z.string({required_error:"Debe seleccionar una fecha de nacimiento."}).refine(e=>!isNaN(new Date(e).getTime()),{message:"La fecha de nacimiento no es v\xe1lida."}),email:u.z.string().email("Email inv\xe1lido."),phone:u.z.string().min(5,"N\xfamero de tel\xe9fono inv\xe1lido.").optional().or(u.z.literal("")),address:u.z.string().min(5,"Direcci\xf3n inv\xe1lida.").optional().or(u.z.literal("")),curso_id:u.z.string({required_error:"Debe seleccionar un curso."}),enrollmentDate:u.z.string({required_error:"Debe seleccionar una fecha de matr\xedcula."}).refine(e=>!isNaN(new Date(e).getTime()),{message:"La fecha de matr\xedcula no es v\xe1lida."})});function R(e){let{onStudentAdded:s,nextId:r,sexos:l,courses:c}=e,{toast:d}=(0,w.dj)(),[u,p]=(0,n.useState)(!1),[R,M]=(0,n.useState)(!1),[y,D]=(0,n.useState)(l),[E,I]=(0,n.useState)(c),B=(0,n.useRef)(null),[A,J]=(0,n.useState)(null),[L,T]=(0,n.useState)(null),U=(0,x.mN)({resolver:(0,m.u)(_),defaultValues:{id:String(r),rut:"",nombres:"",apellidos:"",sexo_id:"",fecha_nacimiento:"",email:"",phone:"",address:"",curso_id:"",enrollmentDate:new Date().toISOString().split("T")[0]}});(0,n.useEffect)(()=>{var e;null==(e=B.current)||e.focus()},[]),(0,n.useEffect)(()=>{!async function(){l&&0!==l.length||D(await (0,j.T)()),c&&0!==c.length||I(await f()),T(await g("Estudiante"))}()},[l,c]);let V=async()=>{let e=U.getValues("rut");if(!(0,C.y)(e))return void U.setError("rut",{type:"manual",message:"RUT inv\xe1lido."});M(!0);try{let s=await v(e);s?(J(s.id),U.setValue("nombres",s.nombres),U.setValue("apellidos",s.apellidos),U.setValue("email",s.email),U.setValue("phone",s.telefono||""),U.setValue("address",s.direccion||""),U.setValue("fecha_nacimiento",s.fecha_nacimiento?new Date(s.fecha_nacimiento).toISOString().split("T")[0]:""),s.sexo&&U.setValue("sexo_id",s.sexo.id),d({title:"Persona Encontrada",description:"Datos cargados en el formulario."})):(J(null),d({title:"No Encontrado",description:"No se encontr\xf3 a nadie con ese RUT. Puede registrarlo manualmente.",variant:"destructive"}))}catch(e){d({title:"Error en la B\xfasqueda",description:e.message||"No se pudo realizar la b\xfasqueda.",variant:"destructive"})}finally{M(!1)}};async function q(e){p(!0);try{var r;let a=A,n={...e,fecha_nacimiento:new Date(e.fecha_nacimiento).toISOString(),enrollmentDate:new Date(e.enrollmentDate).toISOString()};a||(a=await b({rut:n.rut,nombres:n.nombres,apellidos:n.apellidos,email:n.email,phone:n.phone,address:n.address,sexo_id:n.sexo_id,fecha_nacimiento:n.fecha_nacimiento},L));let l="".concat(e.nombres," ").concat(e.apellidos);await N({...n,usuario:a});let t={...e,id:e.id,sexo:y.find(s=>s.id===e.sexo_id)||null,grade:(null==(r=E.find(s=>s.id===e.curso_id))?void 0:r.nombre)||""};s(t),d({title:"Estudiante Matriculado",description:"".concat(l," ha sido a\xf1adido exitosamente.")}),U.reset()}catch(e){d({title:"Error",description:e.message||"Ocurri\xf3 un error al matricular al estudiante.",variant:"destructive"})}finally{p(!1)}}return(0,a.jsx)(h.lV,{...U,children:(0,a.jsxs)("form",{onSubmit:U.handleSubmit(q),className:"space-y-6",children:[(0,a.jsx)(h.zB,{control:U.control,name:"id",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{children:"N\xfamero de Registro"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{placeholder:"Ej: STU-001",...s,readOnly:!0})}),(0,a.jsx)(h.C5,{})]})}}),(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsx)(h.zB,{control:U.control,name:"rut",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{className:"flex-grow",children:[(0,a.jsx)(h.lR,{children:"RUT"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{placeholder:"12.345.678-9",...s,ref:B,onBlur:e=>s.onChange((0,C.P)(e.target.value))})}),(0,a.jsx)(h.C5,{})]})}}),(0,a.jsxs)(t.$,{type:"button",onClick:V,disabled:R,className:"h-10",children:[R?(0,a.jsx)(S.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Buscar"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsx)(h.zB,{control:U.control,name:"nombres",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{children:"Nombre Completo"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{placeholder:"Ej: Juan P\xe9rez",...s})}),(0,a.jsx)(h.C5,{})]})}}),(0,a.jsx)(h.zB,{control:U.control,name:"apellidos",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{children:"Apellidos"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{placeholder:"Ej: P\xe9rez D\xedaz",...s})}),(0,a.jsx)(h.C5,{})]})}}),(0,a.jsx)(h.zB,{control:U.control,name:"enrollmentDate",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{children:"Fecha de Matr\xedcula"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{type:"date",placeholder:"YYYY-MM-DD",...s,value:s.value?s.value.split("T")[0]:""})}),(0,a.jsx)(h.C5,{})]})}}),(0,a.jsx)(h.zB,{control:U.control,name:"curso_id",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{children:"Curso"}),(0,a.jsxs)(z.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(h.MJ,{children:(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{placeholder:"Seleccione un curso"})})}),(0,a.jsx)(z.gC,{children:E.map(e=>(0,a.jsx)(z.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,a.jsx)(h.C5,{})]})}}),(0,a.jsx)(h.zB,{control:U.control,name:"email",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{children:"Email"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{placeholder:"ejemplo@email.com",...s})}),(0,a.jsx)(h.C5,{})]})}}),(0,a.jsx)(h.zB,{control:U.control,name:"sexo_id",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{children:"Sexo"}),(0,a.jsxs)(z.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(h.MJ,{children:(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{placeholder:"Seleccione el sexo"})})}),(0,a.jsx)(z.gC,{children:y.map(e=>(0,a.jsx)(z.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,a.jsx)(h.C5,{})]})}}),(0,a.jsx)(h.zB,{control:U.control,name:"fecha_nacimiento",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{children:"Fecha de Nacimiento"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{type:"date",placeholder:"YYYY-MM-DD",...s,value:s.value?s.value.split("T")[0]:""})}),(0,a.jsx)(h.C5,{})]})}}),(0,a.jsx)(h.zB,{control:U.control,name:"phone",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{children:"Tel\xe9fono"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{placeholder:"555-123-4567",...s})}),(0,a.jsx)(h.C5,{})]})}}),(0,a.jsx)(h.zB,{control:U.control,name:"address",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{className:"sm:col-span-2",children:[(0,a.jsx)(h.lR,{children:"Direcci\xf3n"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{placeholder:"123 Calle Falsa, Ciudad",...s})}),(0,a.jsx)(h.C5,{})]})}})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(t.$,{type:"submit",disabled:u,className:"w-full sm:w-auto",children:[u&&(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Matricular Estudiante"]})})]})})}let M=(0,p.createServerReference)("60360c65f1e40e2ad4d4fbf247bcb5610d3922d3de",p.callServer,void 0,p.findSourceMapURL,"updateStudent"),y=u.z.object({rut:u.z.string().refine(C.y,{message:"RUT inv\xe1lido."}),nombres:u.z.string().min(2,"Los nombres deben tener al menos 2 caracteres."),apellidos:u.z.string().min(2,"Los apellidos deben tener al menos 2 caracteres."),sexo_id:u.z.string({required_error:"Debe seleccionar un sexo."}),email:u.z.string().email("Email inv\xe1lido."),fecha_nacimiento:u.z.string({required_error:"Debe seleccionar una fecha de nacimiento."}),telefono:u.z.string().optional(),direccion:u.z.string().optional(),curso_id:u.z.string({required_error:"Debe seleccionar un curso."}),enrollmentDate:u.z.string({required_error:"Debe seleccionar una fecha de matr\xedcula."}),fecha_retiro:u.z.string().optional()});function D(e){var s,r;let{student:l,onStudentUpdated:c,sexos:o,courses:d}=e,{toast:u}=(0,w.dj)(),[j,p]=(0,n.useState)(!1),f=(0,x.mN)({resolver:(0,m.u)(y),defaultValues:{rut:l.rut,nombres:l.nombres,apellidos:l.apellidos,sexo_id:(null==(s=l.sexo)?void 0:s.id)||"",email:l.email,fecha_nacimiento:l.fecha_nacimiento?l.fecha_nacimiento.substring(0,10):"",telefono:l.telefono||"",direccion:l.direccion||"",curso_id:(null==(r=l.curso)?void 0:r.id)||"",enrollmentDate:l.enrollmentDate?l.enrollmentDate.substring(0,10):"",fecha_retiro:l.fecha_retiro?l.fecha_retiro.substring(0,10):""}});async function g(e){p(!0);try{let s=await M(l.userId,{...e,fecha_nacimiento:new Date(e.fecha_nacimiento).toISOString(),fecha_matricula:new Date(e.enrollmentDate).toISOString(),fecha_retiro:e.fecha_retiro?new Date(e.fecha_retiro).toISOString():null});c(s),u({title:"Estudiante Actualizado",description:"".concat(e.nombres," ").concat(e.apellidos," ha sido actualizado.")})}catch(e){u({title:"Error al actualizar estudiante",description:e.message||"Ocurri\xf3 un error desconocido.",variant:"destructive"})}finally{p(!1)}}return(0,a.jsx)(h.lV,{...f,children:(0,a.jsxs)("form",{onSubmit:f.handleSubmit(g),className:"grid grid-cols-2 gap-x-8 gap-y-4 pt-4",children:[(0,a.jsx)(h.zB,{control:f.control,name:"rut",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"RUT"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{...s,disabled:!0})}),(0,a.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,a.jsx)(h.zB,{control:f.control,name:"email",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Email"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{...s,disabled:!0})}),(0,a.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,a.jsx)(h.zB,{control:f.control,name:"nombres",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Nombres*"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{placeholder:"Ej: Juan",...s})}),(0,a.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,a.jsx)(h.zB,{control:f.control,name:"apellidos",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Apellidos*"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{placeholder:"Ej: P\xe9rez",...s})}),(0,a.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,a.jsx)(h.zB,{control:f.control,name:"sexo_id",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Sexo*"}),(0,a.jsxs)(z.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(h.MJ,{children:(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{placeholder:"Seleccione el sexo"})})}),(0,a.jsx)(z.gC,{children:o.map(e=>(0,a.jsx)(z.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,a.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,a.jsx)(h.zB,{control:f.control,name:"curso_id",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Curso*"}),(0,a.jsxs)(z.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(h.MJ,{children:(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{placeholder:"Seleccione un curso"})})}),(0,a.jsx)(z.gC,{children:d.map(e=>(0,a.jsx)(z.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,a.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,a.jsx)(h.zB,{control:f.control,name:"fecha_nacimiento",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Fecha de Nacimiento*"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{type:"date",...s,value:s.value?s.value.substring(0,10):""})}),(0,a.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,a.jsx)(h.zB,{control:f.control,name:"enrollmentDate",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Fecha de Matr\xedcula*"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{type:"date",...s,value:s.value?s.value.substring(0,10):""})}),(0,a.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,a.jsx)(h.zB,{control:f.control,name:"telefono",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Tel\xe9fono"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{placeholder:"Ej: +56912345678",...s})}),(0,a.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,a.jsx)(h.zB,{control:f.control,name:"direccion",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{children:[(0,a.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Direcci\xf3n"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{placeholder:"Ej: Calle Falsa 123",...s})}),(0,a.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,a.jsx)(h.zB,{control:f.control,name:"fecha_retiro",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.eI,{className:"col-span-2",children:[(0,a.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Fecha de Retiro"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(i.p,{type:"date",...s,value:s.value?s.value.substring(0,10):""})}),(0,a.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,a.jsx)("div",{className:"col-span-2 flex justify-end pt-2",children:(0,a.jsxs)(t.$,{type:"submit",disabled:j,children:[j&&(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Actualizar Estudiante"]})})]})})}var E=r(6948);let I=(0,p.createServerReference)("604bb75682ad00a99bd3b6038b7e9fa76a6ebc38c6",p.callServer,void 0,p.findSourceMapURL,"getStudents");var B=r(243);function A(){let[e,s]=(0,n.useState)([]),[r,x]=(0,n.useState)([]),[m,u]=(0,n.useState)([]),[h,p]=(0,n.useState)(!0),[g,v]=(0,n.useState)(""),[b,N]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[z,_]=(0,n.useState)(null),{toast:M}=(0,w.dj)(),[y,A]=(0,n.useState)(1),[J]=(0,n.useState)(10),[L,T]=(0,n.useState)(0),U=(0,n.useMemo)(()=>Math.ceil(L/J),[L,J]);(0,n.useEffect)(()=>{let e=async()=>{try{let[e,s]=await Promise.all([(0,j.T)(),f()]);x(e),u(s)}catch(e){M({title:"Error al cargar datos complementarios",description:"No se pudieron cargar los datos de sexos y cursos.",variant:"destructive"})}};(async()=>{p(!0);try{let{students:e,totalCount:r}=await I(y,J),a=e.sort((e,s)=>parseInt(e.id,10)-parseInt(s.id,10));s(a),T(r)}catch(e){M({title:"Error al cargar estudiantes",description:"No se pudieron cargar los datos de los estudiantes.",variant:"destructive"})}finally{p(!1)}})(),e()},[y,J,M]);let V=(0,n.useMemo)(()=>e.filter(e=>"".concat(e.nombres," ").concat(e.apellidos).toLowerCase().includes(g.toLowerCase())||e.id.toLowerCase().includes(g.toLowerCase())||e.grade.toLowerCase().includes(g.toLowerCase())),[e,g]),q=(0,n.useMemo)(()=>{if(0===e.length)return 0;let s=Math.max(...e.map(e=>parseInt(e.id,10)));return isFinite(s)?s:0},[e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.lG,{open:b,onOpenChange:N,children:[(0,a.jsx)(E.Zp,{children:(0,a.jsxs)(E.Wu,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,a.jsx)(o.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(i.p,{placeholder:"Buscar por nombre, ID, grado...",value:g,onChange:e=>v(e.target.value),className:"pl-10"})]}),(0,a.jsx)(c.zM,{asChild:!0,children:(0,a.jsxs)(t.$,{children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Matricular Estudiante"]})})]}),(0,a.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:h?(0,a.jsx)(()=>(0,a.jsxs)(l.XI,{children:[(0,a.jsx)(l.A0,{children:(0,a.jsx)(l.Hj,{children:[...Array(10)].map((e,s)=>(0,a.jsx)(l.nd,{children:(0,a.jsx)(B.E,{className:"h-5 w-full"})},s))},"skeleton-header")}),(0,a.jsx)(l.BF,{children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)(l.Hj,{children:(0,a.jsx)(l.nA,{colSpan:10,children:(0,a.jsx)(B.E,{className:"h-8 w-full"})})},s))})]}),{}):(0,a.jsxs)(l.XI,{children:[(0,a.jsx)(l.A0,{children:(0,a.jsxs)(l.Hj,{children:[(0,a.jsx)(l.nd,{className:"whitespace-nowrap",children:"N\xba Registro"}),(0,a.jsx)(l.nd,{className:"whitespace-nowrap",children:"RUT"}),(0,a.jsx)(l.nd,{className:"whitespace-nowrap",children:"Nombre"}),(0,a.jsx)(l.nd,{className:"hidden md:table-cell whitespace-nowrap",children:"Sexo"}),(0,a.jsx)(l.nd,{className:"hidden lg:table-cell whitespace-nowrap",children:"Fec. Nacimiento"}),(0,a.jsx)(l.nd,{className:"whitespace-nowrap",children:"Curso"}),(0,a.jsx)(l.nd,{className:"hidden lg:table-cell whitespace-nowrap",children:"Fec. Matr\xedcula"}),(0,a.jsx)(l.nd,{className:"hidden lg:table-cell whitespace-nowrap",children:"Fec. Retiro"}),(0,a.jsx)(l.nd,{className:"text-right whitespace-nowrap",children:"Acciones"})]})}),(0,a.jsx)(l.BF,{children:V.length>0?V.map(e=>{var s;return(0,a.jsxs)(l.Hj,{children:[(0,a.jsx)(l.nA,{className:"font-medium whitespace-nowrap",children:e.id}),(0,a.jsx)(l.nA,{className:"whitespace-nowrap",children:e.rut}),(0,a.jsx)(l.nA,{className:"whitespace-nowrap",children:(0,a.jsx)("div",{className:"flex items-center gap-2 whitespace-nowrap",children:"".concat(e.nombres," ").concat(e.apellidos)})}),(0,a.jsx)(l.nA,{className:"hidden md:table-cell whitespace-nowrap",children:null==(s=e.sexo)?void 0:s.nombre}),(0,a.jsx)(l.nA,{className:"hidden lg:table-cell whitespace-nowrap",children:new Date(e.fecha_nacimiento).toLocaleDateString("es-ES",{timeZone:"UTC"})}),(0,a.jsx)(l.nA,{className:"whitespace-nowrap",children:e.grade}),(0,a.jsx)(l.nA,{className:"hidden lg:table-cell whitespace-nowrap",children:new Date(e.enrollmentDate).toLocaleDateString("es-ES",{timeZone:"UTC"})}),(0,a.jsx)(l.nA,{className:"hidden lg:table-cell whitespace-nowrap",children:e.fecha_retiro?new Date(e.fecha_retiro).toLocaleDateString("es-ES",{timeZone:"UTC"}):"-"}),(0,a.jsx)(l.nA,{className:"text-right whitespace-nowrap",children:(0,a.jsx)(t.$,{variant:"ghost",size:"sm",onClick:()=>{_(e),C(!0)},children:"Editar"})})]},e.id)}):(0,a.jsx)(l.Hj,{children:(0,a.jsx)(l.nA,{colSpan:10,className:"h-24 text-center whitespace-nowrap",children:"No se encontraron estudiantes."})})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Mostrando ",V.length," de ",L," estudiantes"]}),(0,a.jsxs)("div",{className:"space-x-2 flex items-center",children:[(0,a.jsx)(t.$,{variant:"outline",size:"sm",onClick:()=>{A(e=>Math.max(1,e-1))},disabled:1===y,children:"Anterior"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["P\xe1gina ",y," de ",U]}),(0,a.jsx)(t.$,{variant:"outline",size:"sm",onClick:()=>{A(e=>Math.min(U,e+1))},disabled:y===U,children:"Siguiente"})]})]})]})}),(0,a.jsxs)(c.Cf,{className:"sm:max-w-2xl",children:[(0,a.jsxs)(c.c7,{children:[(0,a.jsx)(c.L3,{className:"font-headline",children:"Matricular Nuevo Estudiante"}),(0,a.jsx)(c.rr,{children:"Complete los detalles a continuaci\xf3n para registrar a un nuevo estudiante. Se generar\xe1 una foto de perfil por IA si no se carga una."})]}),(0,a.jsx)(R,{onStudentAdded:e=>{s(s=>[...s,e].sort((e,s)=>parseInt(e.id,10)-parseInt(s.id,10))),T(e=>e+1),N(!1)},nextId:q+1,sexos:r,courses:m})]})]}),z&&(0,a.jsx)(c.lG,{open:S,onOpenChange:C,children:(0,a.jsxs)(c.Cf,{className:"sm:max-w-2xl",children:[(0,a.jsxs)(c.c7,{children:[(0,a.jsx)(c.L3,{className:"font-headline",children:"Editar Estudiante"}),(0,a.jsx)(c.rr,{children:"Actualice los datos del estudiante."})]}),(0,a.jsx)(D,{student:z,onStudentUpdated:e=>{s(s=>s.map(s=>s.id===e.id?e:s)),C(!1)},sexos:r,courses:m})]})})]})}},3707:(e,s,r)=>{Promise.resolve().then(r.bind(r,273))}},e=>{e.O(0,[723,690,216,441,255,358],()=>e(e.s=3707)),_N_E=e.O()}]);