(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[935],{3707:(e,s,r)=>{Promise.resolve().then(r.bind(r,5379))},5379:(e,s,r)=>{"use strict";r.d(s,{StudentList:()=>A});var n=r(5155),a=r(2115),l=r(7270),t=r(3998),i=r(5142),c=r(1834),o=r(109),d=r(2452),x=r(2544),m=r(6942),u=r(5653),h=r(3281),j=r(6205),p=r(926);let f=(0,p.createServerReference)("00a52b9d6b7daafb4da35f0040d8198808b358498a",p.callServer,void 0,p.findSourceMapURL,"getCourses"),g=(0,p.createServerReference)("40a5e748085dea56f8f35e6c92919f992b8164e200",p.callServer,void 0,p.findSourceMapURL,"getRoleIdByName"),v=(0,p.createServerReference)("402e3bdfb0a1758d1a1f4270f93bb4ed8245e97434",p.callServer,void 0,p.findSourceMapURL,"getStaffByRut"),b=(0,p.createServerReference)("602394c37d1be524a6573abfd41db4db3711bb98c9",p.callServer,void 0,p.findSourceMapURL,"createUser"),N=(0,p.createServerReference)("4004973b052c86bf0c130f59e48584cd2d3c55c560",p.callServer,void 0,p.findSourceMapURL,"addStudent");var S=r(5894),C=r(2033),z=r(4269),_=r(1186);let R=u.z.object({id:u.z.string().min(1,"El n\xfamero de registro es requerido."),rut:u.z.string().refine(z.y,{message:"RUT inv\xe1lido."}),nombres:u.z.string().min(2,"El nombre debe tener al menos 2 caracteres."),apellidos:u.z.string().min(2,"Los apellidos deben tener al menos 2 caracteres."),sexo_id:u.z.string({required_error:"Debe seleccionar un sexo."}),fecha_nacimiento:u.z.string({required_error:"Debe seleccionar una fecha de nacimiento."}).refine(e=>!isNaN(new Date(e).getTime()),{message:"La fecha de nacimiento no es v\xe1lida."}),email:u.z.string().email("Email inv\xe1lido."),phone:u.z.string().min(5,"N\xfamero de tel\xe9fono inv\xe1lido.").optional().or(u.z.literal("")),address:u.z.string().min(5,"Direcci\xf3n inv\xe1lida.").optional().or(u.z.literal("")),curso_id:u.z.string({required_error:"Debe seleccionar un curso."}),enrollmentDate:u.z.string({required_error:"Debe seleccionar una fecha de matr\xedcula."}).refine(e=>!isNaN(new Date(e).getTime()),{message:"La fecha de matr\xedcula no es v\xe1lida."})});function M(e){let{onStudentAdded:s,nextId:r,sexos:l,courses:c}=e,{toast:d}=(0,S.dj)(),[u,p]=(0,a.useState)(!1),[M,w]=(0,a.useState)(!1),[y,D]=(0,a.useState)(l),[E,I]=(0,a.useState)(c),B=(0,a.useRef)(null),[A,J]=(0,a.useState)(null),[L,T]=(0,a.useState)(null),U=(0,x.mN)({resolver:(0,m.u)(R),defaultValues:{id:String(r),rut:"",nombres:"",apellidos:"",sexo_id:"",fecha_nacimiento:"",email:"",phone:"",address:"",curso_id:"",enrollmentDate:new Date().toISOString().split("T")[0]}});(0,a.useEffect)(()=>{var e;null==(e=B.current)||e.focus()},[]),(0,a.useEffect)(()=>{!async function(){l&&0!==l.length||D(await (0,j.T)()),c&&0!==c.length||I(await f()),T(await g("Estudiante"))}()},[l,c]);let V=async()=>{let e=U.getValues("rut");if(!(0,z.y)(e))return void U.setError("rut",{type:"manual",message:"RUT inv\xe1lido."});w(!0);try{let s=await v(e);s?(J(s.id),U.setValue("nombres",s.nombres),U.setValue("apellidos",s.apellidos),U.setValue("email",s.email),U.setValue("phone",s.telefono||""),U.setValue("address",s.direccion||""),U.setValue("fecha_nacimiento",s.fecha_nacimiento?new Date(s.fecha_nacimiento).toISOString().split("T")[0]:""),s.sexo&&U.setValue("sexo_id",s.sexo.id),d({title:"Persona Encontrada",description:"Datos cargados en el formulario."})):(J(null),d({title:"No Encontrado",description:"No se encontr\xf3 a nadie con ese RUT. Puede registrarlo manualmente.",variant:"destructive"}))}catch(e){d({title:"Error en la B\xfasqueda",description:e.message||"No se pudo realizar la b\xfasqueda.",variant:"destructive"})}finally{w(!1)}};async function q(e){p(!0);try{var r;let n=A,a={...e,fecha_nacimiento:new Date(e.fecha_nacimiento).toISOString(),enrollmentDate:new Date(e.enrollmentDate).toISOString()};n||(n=await b({rut:a.rut,nombres:a.nombres,apellidos:a.apellidos,email:a.email,phone:a.phone,address:a.address,sexo_id:a.sexo_id,fecha_nacimiento:a.fecha_nacimiento},L));let l="".concat(e.nombres," ").concat(e.apellidos);await N({...a,usuario:n});let t={...e,id:e.id,sexo:y.find(s=>s.id===e.sexo_id)||null,grade:(null==(r=E.find(s=>s.id===e.curso_id))?void 0:r.nombre)||""};s(t),d({title:"Estudiante Matriculado",description:"".concat(l," ha sido a\xf1adido exitosamente.")}),U.reset()}catch(e){d({title:"Error",description:e.message||"Ocurri\xf3 un error al matricular al estudiante.",variant:"destructive"})}finally{p(!1)}}return(0,n.jsx)(h.lV,{...U,children:(0,n.jsxs)("form",{onSubmit:U.handleSubmit(q),className:"space-y-6",children:[(0,n.jsx)(h.zB,{control:U.control,name:"id",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{children:"N\xfamero de Registro"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{placeholder:"Ej: STU-001",...s,readOnly:!0})}),(0,n.jsx)(h.C5,{})]})}}),(0,n.jsxs)("div",{className:"flex items-end gap-2",children:[(0,n.jsx)(h.zB,{control:U.control,name:"rut",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{className:"flex-grow",children:[(0,n.jsx)(h.lR,{children:"RUT"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{placeholder:"12.345.678-9",...s,ref:B,onBlur:e=>s.onChange((0,z.P)(e.target.value))})}),(0,n.jsx)(h.C5,{})]})}}),(0,n.jsxs)(t.$,{type:"button",onClick:V,disabled:M,className:"h-10",children:[M?(0,n.jsx)(C.A,{className:"h-4 w-4 animate-spin"}):(0,n.jsx)(o.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Buscar"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,n.jsx)(h.zB,{control:U.control,name:"nombres",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{children:"Nombre Completo"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{placeholder:"Ej: Juan P\xe9rez",...s})}),(0,n.jsx)(h.C5,{})]})}}),(0,n.jsx)(h.zB,{control:U.control,name:"apellidos",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{children:"Apellidos"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{placeholder:"Ej: P\xe9rez D\xedaz",...s})}),(0,n.jsx)(h.C5,{})]})}}),(0,n.jsx)(h.zB,{control:U.control,name:"enrollmentDate",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{children:"Fecha de Matr\xedcula"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{type:"date",placeholder:"YYYY-MM-DD",...s,value:s.value?s.value.split("T")[0]:""})}),(0,n.jsx)(h.C5,{})]})}}),(0,n.jsx)(h.zB,{control:U.control,name:"curso_id",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{children:"Curso"}),(0,n.jsxs)(_.l6,{onValueChange:s.onChange,value:s.value,children:[(0,n.jsx)(h.MJ,{children:(0,n.jsx)(_.bq,{children:(0,n.jsx)(_.yv,{placeholder:"Seleccione un curso"})})}),(0,n.jsx)(_.gC,{children:E.map(e=>(0,n.jsx)(_.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,n.jsx)(h.C5,{})]})}}),(0,n.jsx)(h.zB,{control:U.control,name:"email",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{children:"Email"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{placeholder:"ejemplo@email.com",...s})}),(0,n.jsx)(h.C5,{})]})}}),(0,n.jsx)(h.zB,{control:U.control,name:"sexo_id",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{children:"Sexo"}),(0,n.jsxs)(_.l6,{onValueChange:s.onChange,value:s.value,children:[(0,n.jsx)(h.MJ,{children:(0,n.jsx)(_.bq,{children:(0,n.jsx)(_.yv,{placeholder:"Seleccione el sexo"})})}),(0,n.jsx)(_.gC,{children:y.map(e=>(0,n.jsx)(_.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,n.jsx)(h.C5,{})]})}}),(0,n.jsx)(h.zB,{control:U.control,name:"fecha_nacimiento",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{children:"Fecha de Nacimiento"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{type:"date",placeholder:"YYYY-MM-DD",...s,value:s.value?s.value.split("T")[0]:""})}),(0,n.jsx)(h.C5,{})]})}}),(0,n.jsx)(h.zB,{control:U.control,name:"phone",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{children:"Tel\xe9fono"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{placeholder:"555-123-4567",...s})}),(0,n.jsx)(h.C5,{})]})}}),(0,n.jsx)(h.zB,{control:U.control,name:"address",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{className:"sm:col-span-2",children:[(0,n.jsx)(h.lR,{children:"Direcci\xf3n"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{placeholder:"123 Calle Falsa, Ciudad",...s})}),(0,n.jsx)(h.C5,{})]})}})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)(t.$,{type:"submit",disabled:u,className:"w-full sm:w-auto",children:[u&&(0,n.jsx)(C.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Matricular Estudiante"]})})]})})}let w=(0,p.createServerReference)("6088892300c7e3f345f7b37dab934cd7d7bc20b1ff",p.callServer,void 0,p.findSourceMapURL,"updateStudent"),y=u.z.object({rut:u.z.string().refine(z.y,{message:"RUT inv\xe1lido."}),nombres:u.z.string().min(2,"Los nombres deben tener al menos 2 caracteres."),apellidos:u.z.string().min(2,"Los apellidos deben tener al menos 2 caracteres."),sexo_id:u.z.string({required_error:"Debe seleccionar un sexo."}),email:u.z.string().email("Email inv\xe1lido."),fecha_nacimiento:u.z.string({required_error:"Debe seleccionar una fecha de nacimiento."}),telefono:u.z.string().optional(),direccion:u.z.string().optional(),curso_id:u.z.string({required_error:"Debe seleccionar un curso."}),enrollmentDate:u.z.string({required_error:"Debe seleccionar una fecha de matr\xedcula."}),fecha_retiro:u.z.string().optional()});function D(e){var s,r;let{student:l,onStudentUpdated:c,sexos:o,courses:d}=e,{toast:u}=(0,S.dj)(),[j,p]=(0,a.useState)(!1),f=(0,x.mN)({resolver:(0,m.u)(y),defaultValues:{rut:l.rut,nombres:l.nombres,apellidos:l.apellidos,sexo_id:(null==(s=l.sexo)?void 0:s.id)||"",email:l.email,fecha_nacimiento:l.fecha_nacimiento?l.fecha_nacimiento.substring(0,10):"",telefono:l.telefono||"",direccion:l.direccion||"",curso_id:(null==(r=l.curso)?void 0:r.id)||"",enrollmentDate:l.enrollmentDate?l.enrollmentDate.substring(0,10):"",fecha_retiro:l.fecha_retiro?l.fecha_retiro.substring(0,10):""}});async function g(e){p(!0);try{let s=await w(l.userId,{...e,fecha_nacimiento:new Date(e.fecha_nacimiento).toISOString(),fecha_matricula:new Date(e.enrollmentDate).toISOString(),fecha_retiro:e.fecha_retiro?new Date(e.fecha_retiro).toISOString():null});c(s),u({title:"Estudiante Actualizado",description:"".concat(e.nombres," ").concat(e.apellidos," ha sido actualizado.")})}catch(e){u({title:"Error al actualizar estudiante",description:e.message||"Ocurri\xf3 un error desconocido.",variant:"destructive"})}finally{p(!1)}}return(0,n.jsx)(h.lV,{...f,children:(0,n.jsxs)("form",{onSubmit:f.handleSubmit(g),className:"grid grid-cols-2 gap-x-8 gap-y-4 pt-4",children:[(0,n.jsx)(h.zB,{control:f.control,name:"rut",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"RUT"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{...s,disabled:!0})}),(0,n.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,n.jsx)(h.zB,{control:f.control,name:"email",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Email"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{...s,disabled:!0})}),(0,n.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,n.jsx)(h.zB,{control:f.control,name:"nombres",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Nombres*"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{placeholder:"Ej: Juan",...s})}),(0,n.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,n.jsx)(h.zB,{control:f.control,name:"apellidos",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Apellidos*"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{placeholder:"Ej: P\xe9rez",...s})}),(0,n.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,n.jsx)(h.zB,{control:f.control,name:"sexo_id",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Sexo*"}),(0,n.jsxs)(_.l6,{onValueChange:s.onChange,value:s.value,children:[(0,n.jsx)(h.MJ,{children:(0,n.jsx)(_.bq,{children:(0,n.jsx)(_.yv,{placeholder:"Seleccione el sexo"})})}),(0,n.jsx)(_.gC,{children:o.map(e=>(0,n.jsx)(_.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,n.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,n.jsx)(h.zB,{control:f.control,name:"curso_id",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Curso*"}),(0,n.jsxs)(_.l6,{onValueChange:s.onChange,value:s.value,children:[(0,n.jsx)(h.MJ,{children:(0,n.jsx)(_.bq,{children:(0,n.jsx)(_.yv,{placeholder:"Seleccione un curso"})})}),(0,n.jsx)(_.gC,{children:d.map(e=>(0,n.jsx)(_.eb,{value:e.id,children:e.nombre},e.id))})]}),(0,n.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,n.jsx)(h.zB,{control:f.control,name:"fecha_nacimiento",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Fecha de Nacimiento*"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{type:"date",...s,value:s.value?s.value.substring(0,10):""})}),(0,n.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,n.jsx)(h.zB,{control:f.control,name:"enrollmentDate",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Fecha de Matr\xedcula*"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{type:"date",...s,value:s.value?s.value.substring(0,10):""})}),(0,n.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,n.jsx)(h.zB,{control:f.control,name:"telefono",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Tel\xe9fono"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{placeholder:"Ej: +56912345678",...s})}),(0,n.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,n.jsx)(h.zB,{control:f.control,name:"direccion",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{children:[(0,n.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Direcci\xf3n"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{placeholder:"Ej: Calle Falsa 123",...s})}),(0,n.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,n.jsx)(h.zB,{control:f.control,name:"fecha_retiro",render:e=>{let{field:s}=e;return(0,n.jsxs)(h.eI,{className:"col-span-2",children:[(0,n.jsx)(h.lR,{className:"text-xs sm:text-sm",children:"Fecha de Retiro"}),(0,n.jsx)(h.MJ,{children:(0,n.jsx)(i.p,{type:"date",...s,value:s.value?s.value.substring(0,10):""})}),(0,n.jsx)(h.C5,{className:"text-xs sm:text-sm"})]})}}),(0,n.jsx)("div",{className:"col-span-2 flex justify-end pt-2",children:(0,n.jsxs)(t.$,{type:"submit",disabled:j,children:[j&&(0,n.jsx)(C.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Actualizar Estudiante"]})})]})})}var E=r(6948);let I=(0,p.createServerReference)("60ec1446762abbe1d6b4d13d77d5c40df928374128",p.callServer,void 0,p.findSourceMapURL,"getStudents");var B=r(243);function A(){let[e,s]=(0,a.useState)([]),[r,x]=(0,a.useState)([]),[m,u]=(0,a.useState)([]),[h,p]=(0,a.useState)(!0),[g,v]=(0,a.useState)(""),[b,N]=(0,a.useState)(!1),[C,z]=(0,a.useState)(!1),[_,R]=(0,a.useState)(null),{toast:w}=(0,S.dj)(),[y,A]=(0,a.useState)(1),[J]=(0,a.useState)(10),[L,T]=(0,a.useState)(0),U=(0,a.useMemo)(()=>Math.ceil(L/J),[L,J]);(0,a.useEffect)(()=>{let e=async()=>{try{let[e,s]=await Promise.all([(0,j.T)(),f()]);x(e),u(s)}catch(e){w({title:"Error al cargar datos complementarios",description:"No se pudieron cargar los datos de sexos y cursos.",variant:"destructive"})}};(async()=>{p(!0);try{let{students:e,totalCount:r}=await I(y,J),n=e.sort((e,s)=>parseInt(e.id,10)-parseInt(s.id,10));s(n),T(r)}catch(e){w({title:"Error al cargar estudiantes",description:"No se pudieron cargar los datos de los estudiantes.",variant:"destructive"})}finally{p(!1)}})(),e()},[y,J,w]);let V=(0,a.useMemo)(()=>e.filter(e=>"".concat(e.nombres," ").concat(e.apellidos).toLowerCase().includes(g.toLowerCase())||e.id.toLowerCase().includes(g.toLowerCase())||e.grade.toLowerCase().includes(g.toLowerCase())),[e,g]),q=(0,a.useMemo)(()=>{if(0===e.length)return 0;let s=Math.max(...e.map(e=>parseInt(e.id,10)));return isFinite(s)?s:0},[e]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.lG,{open:b,onOpenChange:N,children:[(0,n.jsx)(E.Zp,{children:(0,n.jsxs)(E.Wu,{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-4",children:[(0,n.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,n.jsx)(o.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(i.p,{placeholder:"Buscar por nombre, ID, grado...",value:g,onChange:e=>v(e.target.value),className:"pl-10"})]}),(0,n.jsx)(c.zM,{asChild:!0,children:(0,n.jsxs)(t.$,{children:[(0,n.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Matricular Estudiante"]})})]}),(0,n.jsx)("div",{className:"rounded-lg border",children:h?(0,n.jsx)(()=>(0,n.jsxs)(l.XI,{children:[(0,n.jsx)(l.A0,{children:(0,n.jsx)(l.Hj,{children:[...Array(10)].map((e,s)=>(0,n.jsx)(l.nd,{children:(0,n.jsx)(B.E,{className:"h-5 w-full"})},s))},"skeleton-header")}),(0,n.jsx)(l.BF,{children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,n.jsx)(l.Hj,{children:(0,n.jsx)(l.nA,{colSpan:10,children:(0,n.jsx)(B.E,{className:"h-8 w-full"})})},s))})]}),{}):(0,n.jsxs)(l.XI,{children:[(0,n.jsx)(l.A0,{children:(0,n.jsxs)(l.Hj,{children:[(0,n.jsx)(l.nd,{children:"N\xba Registro"}),(0,n.jsx)(l.nd,{children:"RUT"}),(0,n.jsx)(l.nd,{children:"Nombre"}),(0,n.jsx)(l.nd,{className:"hidden md:table-cell",children:"Sexo"}),(0,n.jsx)(l.nd,{className:"hidden lg:table-cell",children:"Fec. Nacimiento"}),(0,n.jsx)(l.nd,{children:"Curso"}),(0,n.jsx)(l.nd,{className:"hidden lg:table-cell",children:"Fec. Matr\xedcula"}),(0,n.jsx)(l.nd,{className:"hidden lg:table-cell",children:"Fec. Retiro"}),(0,n.jsx)(l.nd,{className:"text-right",children:"Acciones"})]})}),(0,n.jsx)(l.BF,{children:V.length>0?V.map(e=>{var s;return(0,n.jsxs)(l.Hj,{children:[(0,n.jsx)(l.nA,{className:"font-medium",children:e.id}),(0,n.jsx)(l.nA,{children:e.rut}),(0,n.jsx)(l.nA,{children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:"".concat(e.nombres," ").concat(e.apellidos)})}),(0,n.jsx)(l.nA,{className:"hidden md:table-cell",children:null==(s=e.sexo)?void 0:s.nombre}),(0,n.jsx)(l.nA,{className:"hidden lg:table-cell",children:new Date(e.fecha_nacimiento).toLocaleDateString("es-ES",{timeZone:"UTC"})}),(0,n.jsx)(l.nA,{children:e.grade}),(0,n.jsx)(l.nA,{className:"hidden lg:table-cell",children:new Date(e.enrollmentDate).toLocaleDateString("es-ES",{timeZone:"UTC"})}),(0,n.jsx)(l.nA,{className:"hidden lg:table-cell",children:e.fecha_retiro?new Date(e.fecha_retiro).toLocaleDateString("es-ES",{timeZone:"UTC"}):"-"}),(0,n.jsx)(l.nA,{className:"text-right",children:(0,n.jsx)(t.$,{variant:"ghost",size:"sm",onClick:()=>{R(e),z(!0)},children:"Editar"})})]},e.id)}):(0,n.jsx)(l.Hj,{children:(0,n.jsx)(l.nA,{colSpan:10,className:"h-24 text-center",children:"No se encontraron estudiantes."})})})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Mostrando ",V.length," de ",L," estudiantes"]}),(0,n.jsxs)("div",{className:"space-x-2 flex items-center",children:[(0,n.jsx)(t.$,{variant:"outline",size:"sm",onClick:()=>{A(e=>Math.max(1,e-1))},disabled:1===y,children:"Anterior"}),(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:["P\xe1gina ",y," de ",U]}),(0,n.jsx)(t.$,{variant:"outline",size:"sm",onClick:()=>{A(e=>Math.min(U,e+1))},disabled:y===U,children:"Siguiente"})]})]})]})}),(0,n.jsxs)(c.Cf,{className:"sm:max-w-2xl",children:[(0,n.jsxs)(c.c7,{children:[(0,n.jsx)(c.L3,{className:"font-headline",children:"Matricular Nuevo Estudiante"}),(0,n.jsx)(c.rr,{children:"Complete los detalles a continuaci\xf3n para registrar a un nuevo estudiante. Se generar\xe1 una foto de perfil por IA si no se carga una."})]}),(0,n.jsx)(M,{onStudentAdded:e=>{s(s=>[...s,e].sort((e,s)=>parseInt(e.id,10)-parseInt(s.id,10))),T(e=>e+1),N(!1)},nextId:q+1,sexos:r,courses:m})]})]}),_&&(0,n.jsx)(c.lG,{open:C,onOpenChange:z,children:(0,n.jsxs)(c.Cf,{className:"sm:max-w-2xl",children:[(0,n.jsxs)(c.c7,{children:[(0,n.jsx)(c.L3,{className:"font-headline",children:"Editar Estudiante"}),(0,n.jsx)(c.rr,{children:"Actualice los datos del estudiante."})]}),(0,n.jsx)(D,{student:_,onStudentUpdated:e=>{s(s=>s.map(s=>s.id===e.id?e:s)),z(!1)},sexos:r,courses:m})]})})]})}}},e=>{e.O(0,[723,690,686,441,255,358],()=>e(e.s=3707)),_N_E=e.O()}]);